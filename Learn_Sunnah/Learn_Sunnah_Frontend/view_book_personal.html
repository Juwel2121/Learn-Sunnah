<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    
    <title>Book Details</title><!-- page name -->
</head>
<!-- main code start --> 
<body class="bg-slate-500">
    <!-- Navbar design here -->
    <nav class="fixed top-0 w-full z-10 bg-white border-gray-200 px-2 sm:px-4 py-1 dark:bg-gray-900">
        <div class="container flex flex-wrap items-center justify-between mx-auto">
          <a href="all_book.html" class="flex items-center">
              <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Sunnah Library</span>
          </a>
          <div class="flex md:order-2">
             <!-- hidden menu button for mobile --> 
            <button data-collapse-toggle="navbar-search" type="button" onclick="showMenu()" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-search" aria-expanded="false">
              <span class="sr-only">Open menu</span>
              <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
            </button>
          </div>
          <!-- Navbar button design here -->
            <div id="menu"  class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-search">
              <ul class="flex flex-col p-4 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                <li>
                  <a href="index.html" class="block py-2 pl-3 pr-4 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white" aria-current="page">Home</a>
                </li>
                <li>
                  <a href="about.html" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">About</a>
                </li>
                <li>
                  <a href="login.html" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">login</a>
                </li>
                <li>
                  <a href="signup.html" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Signup</a>
                </li>
                <li>
                  <a href="help.html" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Help</a>
                </li>
              </ul>
              <form> <!-- Navbar search button design here -->  
                <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                        </svg>
                    </div>
                    <input type="search" id="default-search" class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="keywords" required>
                    <button type="submit" class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Search</button>
                </div>
              </form>
              <div class="pl-[200px]" id="card"></div>
            </div>
        </div>
      </nav>
      <!-- username get & show -->
      <script> 
       
        if(localStorage.getItem('access_token')) {
      console.log(localStorage.getItem('access_token')) //http://127.0.0.1:8000/auth/users/me/ 

      fetch('http://127.0.0.1:8000/auth/users/me/', {
        method: "GET",
        headers: {
          'Authorization': `JWT ${localStorage.getItem('access_token')}`
        }
      })
      .then((data) => {
        return data.json()
      })
      .then((data) => {
        let carddata="";
      carddata+=`<a class="cursor-pointer" href="profile.html"><p class=" font-bold text-[20px]">${data.username}</p></a>`;
    
    document.getElementById('card').innerHTML=carddata;
        console.log(data);
      })
    }
    //current content visibility ensure 
        function showMenu(){
          const show=document.getElementById("menu");
          if(show.style.display=="block")
          {
            show.style.display="";
          }
          else{
            show.style.display="block";
          }
        }
      </script>
 <div class="flex justify-center">
 </div>
 <section class="pt-[60px]">
  <div id="card-container" class=" p-4">

      <!--fetch data forward here-->
  </div>
  
  
  
 </section>
 
  <script>
    // Get the value of the 'id' parameter from the current URL
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get('id');
// console.log(id);
if(localStorage.getItem('access_token')) {
      console.log(localStorage.getItem('access_token')) //http://127.0.0.1:8000/auth/users/me/ 
    //book fetch
    fetch('http://127.0.0.1:8000/books/my_books/', {
        method: "GET",
        headers: {
          'Authorization': `JWT ${localStorage.getItem('access_token')}`
        }
      }).then((data) => {
    // Process the data and create cards
    return data.json();
  }).then((objdata)=>{
    // if(id===objdata.id){
      // if (id && objdata.some((item) => item.id === id)) {  
    let carddata="";
        // console.log(objdata);
        
        objdata.map((values)=>{
          if(id==values.id){console.log(values)
      carddata+=`<div class="flex">
    <div class="flex flex-col w-[400px]">
        <img class="h-[500px] w-[400px]" src="http://127.0.0.1:8000${values.cover_photo}" alt="">
        <div class="space-x-2">
          <p line-height: 1.75 >Views:  ${values.views}  &nbsp  &nbsp Rating:  ${values.rating}</p>
          
        </div>
        <div class="flex justify-center items-center mt-4">
            <a href="./pdf.html?http://127.0.0.1:8000${values.pdf}"><button type="submit"
              class="mx-auto text-white bg-blue-500 hover:bg-blue-600 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Read Book</button></a>
            </div>
    </div>
    <div class="w-full p-2">
        <h1 class="text-[32px]">${values.name}</h1>
        <p class="mt-4">${values.description}</p>
        <div class="flex justify-evenly mt-[200px]">
            <div>publish date <br>${values.publish_date}</div>
            <div>publisher<br>${values.publisher}</div>
            <div>language<br>${values.language}</div>
            <div>page number <br>${values.page_number}</div>
            <div>ISBN <br>${values.isbn}</div>
         
            
        </div>
    </div>
  </div>
      `
          }
      ;})
     
    document.getElementById('card-container').innerHTML=carddata;

});
}
  </script>
   <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
</body>
</html>